#
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# If you want to set the specified configuration value, you can set the new
# in this file. For example if you want to specify the etcd address:
#
# deployment:
#   role: traditional
#   role_traditional:
#     config_provider: etcd
#   etcd:
#     host:
#       - http://127.0.0.1:2379
#
# To configure via environment variables, you can use `${{VAR}}` syntax. For instance:
#
# deployment:
#   role: traditional
#   role_traditional:
#     config_provider: etcd
#   etcd:
#     host:
#       - http://${{ETCD_HOST}}:2379
#
# And then run `export ETCD_HOST=$your_host` before `make init`.
#
# If the configured environment variable can't be found, an error will be thrown.
#
# Also, If you want to use default value when the environment variable not set,
# Use `${{VAR:=default_value}}` instead. For instance:
#
# deployment:
#   role: traditional
#   role_traditional:
#     config_provider: etcd
#   etcd:
#     host:
#       - http://${{ETCD_HOST:=localhost}}:2379
#
# This will find environment variable `ETCD_HOST` first, and if it's not exist it will use `localhost` as default value.
#
deployment:
  config_provider: etcd
  etcd:
    startup_retry: 2
    host:
    - http://127.0.0.1:2379
    timeout: 30
    prefix: /apisix
    tls:
      verify: true
    watch_timeout: 50
  admin:
    admin_key:
    - key: oBtnkxUxnzeaYDoVEQXtzMaOKoNLSnIJ
      name: admin
      role: admin
    admin_listen:
      ip: 0.0.0.0
      port: 9180
    enable_admin_cors: true
    admin_key_required: true
    admin_api_version: v3
    allow_admin:
    - 127.0.0.0/24
  role: traditional
  role_traditional:
    config_provider: etcd
graphql:
  max_size: 1048576
stream_plugins:
- ip-restriction
- limit-conn
- mqtt-proxy
- syslog
plugins:
- real-ip
- ai
- client-control
- proxy-control
- request-id
- zipkin
- ext-plugin-pre-req
- fault-injection
- mocking
- serverless-pre-function
- cors
- ip-restriction
- ua-restriction
- referer-restriction
- csrf
- uri-blocker
- request-validation
- chaitin-waf
- multi-auth
- openid-connect
- cas-auth
- authz-casbin
- authz-casdoor
- wolf-rbac
- ldap-auth
- hmac-auth
- basic-auth
- jwt-auth
- jwe-decrypt
- key-auth
- consumer-restriction
- attach-consumer-label
- forward-auth
- opa
- authz-keycloak
- proxy-cache
- body-transformer
- ai-prompt-template
- ai-prompt-decorator
- ai-prompt-guard
- ai-rag
- ai-rate-limiting
- ai-proxy-multi
- ai-proxy
- ai-aws-content-moderation
- proxy-mirror
- proxy-rewrite
- workflow
- api-breaker
- limit-conn
- limit-count
- limit-req
- gzip
- server-info
- traffic-split
- redirect
- response-rewrite
- degraphql
- kafka-proxy
- grpc-transcode
- grpc-web
- http-dubbo
- public-api
- prometheus
- datadog
- loki-logger
- elasticsearch-logger
- echo
- loggly
- http-logger
- splunk-hec-logging
- skywalking-logger
- google-cloud-logging
- sls-logger
- tcp-logger
- kafka-logger
- rocketmq-logger
- syslog
- udp-logger
- file-logger
- clickhouse-logger
- tencent-cloud-cls
- inspect
- example-plugin
- aws-lambda
- azure-functions
- openwhisk
- openfunction
- serverless-post-function
- ext-plugin-post-req
- ext-plugin-post-resp
plugin_attr:
  server-info:
    report_ttl: 60
  opentelemetry:
    collector:
      request_timeout: 3
      address: 127.0.0.1:4318
      request_headers:
        Authorization: token
    trace_id_source: x-request-id
    set_ngx_var: false
    batch_span_processor:
      max_queue_size: 1024
      batch_timeout: 2
      inactive_timeout: 1
      max_export_batch_size: 16
      drop_on_queue_full: false
    resource:
      service.name: APISIX
  log-rotate:
    interval: 3600
    max_kept: 168
    timeout: 10000
    max_size: -1
    enable_compression: false
  proxy-mirror:
    timeout:
      connect: 60s
      read: 60s
      send: 60s
  prometheus:
    metric_prefix: apisix_
    enable_export_server: true
    export_uri: /apisix/prometheus/metrics
    export_addr:
      ip: 127.0.0.1
      port: 9091
  zipkin:
    set_ngx_var: false
  dubbo-proxy:
    upstream_multiplex_count: 32
  inspect:
    hooks_file: /usr/local/apisix/plugin_inspect_hooks.lua
    delay: 3
  skywalking:
    endpoint_addr: http://127.0.0.1:12800
    report_interval: 3
    service_instance_name: APISIX Instance Name
    service_name: APISIX
...
